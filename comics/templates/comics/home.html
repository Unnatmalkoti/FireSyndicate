{% extends "layout.html" %}
{%load static%}

{%block head%}
<link rel="stylesheet" href="{% static "css/home.css"%}">
<meta name="active-link" value="home-link">

{%endblock head%}

{%block slider%}
{%if Slides|length%}

	<div class="slider-container">
		<div class="arrow left" id="left-arrow"><img src="{%static 'assets/left-arrow-slider.svg' %}"></div>
		<div class="arrow right" id="right-arrow"><img src="{%static 'assets/right-arrow-slider.svg' %}"></div>
		<div class="slider-content">
		{%for Slide in Slides%}
			<div class="slide" onclick="goto('{%url "chapter-view" Slide.comic.getLatestChapter.pk %}')" order="{{Slide.orderNumber}}">
					<div class="left-div">
					<div class="slide-content">
							<h1>{{Slide.comic.title}}</h1>
							<p>{{Slide.comic.description|truncatewords:35}}</p>
							{%if Slide.comic.getLatestChapter%}
							<a href= '{%url "chapter-view" Slide.comic.getLatestChapter.pk %}'> Read Chapter {{Slide.comic.getLatestChapter.number|floatformat}} </a>
							{%endif%}
					</div>
				</div>

					<img class="slide-image" src ={{Slide.image.url}} />


			</div>
		{%endfor%}
		
		</div>
	</div>
{%endif%}
{%endblock slider%}



{%block content%}
{%if request.GET.query%}

		<div class="section">
			<div class ="section-heading">Search Results ({{SearchQuerySet|length}})</div>
			<div class ="tile-wrapper">
				{%if SearchQuerySet%}
				{%for comic in SearchQuerySet%}
				<a href="{% url "comic-detail" comic.pk%}">
					<div class="tile"> 
						{%if comic.cover%}

						<img src="{{comic.cover.url}}" class="comic-cover" height='300'>
						{%endif%}
						<div id="tile-title">
						<a  href="{% url "comic-detail" comic.pk%}">{{comic.title}}</a>
					</div>
					</div>
				</a>
				{%endfor%}
				{%else%}
				<h3>No results found.</h3>
				{%endif%}

			</div>
		</div>
{% else %}




<div class="section">
	<div class ="section-heading">Latest</div>
	<div class ="tile-wrapper">
			{% for chapter in LatestChapters %}
		<a href="{% url "chapter-view" chapter.pk%}">
			<div class="tile"> 
		
				{%if chapter.comic.cover%}

				<img src="{{chapter.comic.cover.url}}" class="comic-cover" height='300'>
				{%endif%}

					<div id="tile-title">
					<a href="{% url "comic-detail" chapter.comic.pk %}">{{chapter.comic.title}}</a> | <a href="{% url "chapter-view" chapter.pk%}"> Chapter {{chapter.number |floatformat}}</span></a>
				</div> 				
			</div>
			{% endfor %}
			
		</div>
	</a>

</div>

<div class="section">
	<div class ="section-heading">Popular</div>
	<div class="tile-wrapper">

		{% for comic in PopularComics %}			
		<a href="{% url "comic-detail" comic.pk%}">
			<div class="tile"> 
				{%if comic.cover%}

				<img src="{{comic.cover.url}}" class="comic-cover" height='300'>
				{%endif%}
				<div id="tile-title">
				<a  href="{% url "comic-detail" comic.pk%}">{{comic.title}}</a>
			</div>
			</div>
		</a>
		{% endfor %}
	<div>
</div>
{%endif%}
<script src="{%static 'js/home.js'%}"> </script>
{%endblock%}